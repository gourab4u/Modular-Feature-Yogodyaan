import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { ArrowLeft, Calendar, Clock, Eye, User } from 'lucide-react';
import { Link, useParams } from 'react-router-dom';
import { LoadingSpinner } from '../../../shared/components/ui/LoadingSpinner';
import { RatingModule } from '../components/RatingModule';
import { ShareButtons } from '../components/ShareButtons';
import { useArticle } from '../hooks/useArticle';
export function ArticleView() {
    const { id } = useParams();
    const { article, averageRating, totalRatings, userRating, loading, error, submitRating } = useArticle(id);
    if (loading) {
        return (_jsx("div", { className: "min-h-screen bg-white dark:bg-slate-900 flex items-center justify-center", children: _jsx(LoadingSpinner, { size: "lg" }) }));
    }
    if (error || !article) {
        return (_jsx("div", { className: "min-h-screen bg-white dark:bg-slate-900 flex items-center justify-center", children: _jsxs("div", { className: "text-center", children: [_jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-4", children: "Article Not Found" }), _jsx("p", { className: "text-gray-600 dark:text-gray-300 mb-6", children: error || 'The article you\'re looking for doesn\'t exist or has been removed.' }), _jsx(Link, { to: "/learning", className: "btn-primary", children: "\u2190 Back to Learning Center" })] }) }));
    }
    const formatDate = (dateString) => {
        return new Date(dateString).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    };
    const estimatedReadTime = Math.ceil(article.content.replace(/<[^>]*>/g, '').split(' ').length / 200);
    return (_jsxs("div", { className: "min-h-screen bg-white dark:bg-slate-900", children: [_jsx("div", { className: "bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 sticky top-0 z-40", children: _jsx("div", { className: "max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4", children: _jsxs(Link, { to: "/learning", className: "inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors", children: [_jsx(ArrowLeft, { className: "w-4 h-4 mr-2" }), "Back to Learning Center"] }) }) }), _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8", children: _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-4 gap-8", children: [_jsx("div", { className: "lg:col-span-3", children: _jsxs("article", { className: "bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-600 overflow-hidden", children: [article.image_url && (_jsxs("div", { className: "relative h-96 overflow-hidden", children: [_jsx("img", { src: article.image_url, alt: article.title, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" }), _jsx("div", { className: "absolute bottom-6 left-6", children: _jsx("span", { className: "bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium capitalize", children: article.category }) })] })), _jsxs("div", { className: "p-8", children: [_jsx("h1", { className: "text-4xl font-bold text-gray-900 dark:text-white mb-4 leading-tight", children: article.title }), _jsxs("div", { className: "flex flex-wrap items-center gap-6 text-sm text-gray-600 dark:text-slate-300 mb-6 pb-6 border-b border-gray-200 dark:border-slate-600", children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(User, { className: "w-4 h-4" }), _jsx("span", { children: article.author?.full_name || 'Yogodyaan Team' })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Calendar, { className: "w-4 h-4" }), _jsx("span", { children: formatDate(article.published_at || article.created_at) })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Clock, { className: "w-4 h-4" }), _jsxs("span", { children: [estimatedReadTime, " min read"] })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Eye, { className: "w-4 h-4" }), _jsxs("span", { children: [article.view_count, " views"] })] })] }), _jsx("div", { className: "prose prose-lg max-w-none prose-headings:text-gray-900 dark:prose-headings:text-white prose-p:text-gray-700 dark:prose-p:text-slate-300 prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:text-gray-700 dark:prose-ul:text-slate-300 prose-ol:text-gray-700 dark:prose-ol:text-slate-300", dangerouslySetInnerHTML: { __html: article.content } }), article.video_url && (_jsxs("div", { className: "mt-8", children: [_jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-4", children: "Related Video" }), _jsx("div", { className: "aspect-video rounded-lg overflow-hidden", children: _jsx("iframe", { src: article.video_url, title: "Related Video", className: "w-full h-full", allowFullScreen: true }) })] })), article.tags.length > 0 && (_jsxs("div", { className: "mt-8 pt-8 border-t border-gray-200 dark:border-slate-600", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Tags" }), _jsx("div", { className: "flex flex-wrap gap-2", children: article.tags.map((tag, index) => (_jsxs("span", { className: "bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium", children: ["#", tag] }, index))) })] }))] })] }) }), _jsx("div", { className: "lg:col-span-1", children: _jsxs("div", { className: "sticky top-24 space-y-6", children: [_jsx(RatingModule, { averageRating: averageRating, totalRatings: totalRatings, userRating: userRating, onSubmitRating: submitRating }), _jsx(ShareButtons, { title: article.title, url: `/learning/${article.id}` }), _jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-600 p-6", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Quick Navigation" }), _jsxs("div", { className: "space-y-3", children: [_jsx(Link, { to: "/learning", className: "block text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors", children: "\u2190 All Articles" }), _jsxs(Link, { to: `/learning?category=${article.category}`, className: "block text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors", children: ["More in ", article.category] }), _jsx(Link, { to: "/book-class", className: "block text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors", children: "Book a Class \u2192" })] })] })] }) })] }) })] }));
}
